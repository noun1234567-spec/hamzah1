<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>تطبيق الهمزة في بداية الكلمة</title>

  <style>
    :root {
      --primary-color: #933768;
      --light-bg: #fdf6f9;
      --text-color: #444;
      --dark-color: #6d284d;
    }

    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background-color: var(--light-bg);
      margin: 0;
      padding: 20px;
    }

    .course-title {
      text-align: center;
      color: var(--primary-color);
      font-size: 1.6rem;
      margin-bottom: 25px;
      font-weight: bold;
    }

    .main-container {
      max-width: 1100px;
      margin: 0 auto;
      background: #fff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(147, 55, 104, 0.1);
    }

    .top-section {
      display: flex;
      gap: 30px;
      align-items: flex-start;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .text-side {
      flex: 1;
      min-width: 300px;
      background: #fffafa;
      border-right: 6px solid var(--primary-color);
      padding: 20px;
      border-radius: 12px;
      font-size: 0.95rem;
      line-height: 1.8;
      color: var(--text-color);
    }

    .text-side h3 {
      margin-top: 0;
      color: var(--primary-color);
    }

    .video-side {
      flex: 1.2;
      min-width: 300px;
    }

    iframe.video-frame {
      width: 100%;
      height: 315px;
      border-radius: 12px;
      border: 4px solid var(--primary-color);
    }

    .speaker-box {
      background: #fffafa;
      border-left: 5px solid var(--primary-color);
      padding: 10px 15px;
      border-radius: 10px;
      margin-bottom: 10px;
      font-size: 0.9rem;
    }

    .exercise-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .exercise-box {
      background: #fffafa;
      border-right: 6px solid var(--primary-color);
      padding: 15px;
      border-radius: 12px;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.03);
    }

    .exercise-box h4 {
      margin: 0 0 10px 0;
      color: var(--primary-color);
    }

    .exercise-box label {
      display: block;
      margin: 8px 0;
      cursor: pointer;
      padding: 5px;
      transition: 0.2s;
    }

    .exercise-box label:hover {
      background: #f0e6eb;
      border-radius: 5px;
    }

    /* زر التصحيح بثلاث حالات */
    #checkBtn {
      padding: 12px 40px;
      border: none;
      border-radius: 10px;
      font-size: 1.1rem;
      margin-top: 25px;
      transition: 0.3s;
      display: inline-block;
      font-weight: bold;
    }

    .state0 { background-color: #bfa5b5; color: white; cursor: not-allowed; opacity: 0.6; }
    .state1 { background-color: #c97aa5; color: white; cursor: not-allowed; opacity: 0.8; }
    .state2 { background-color: #933768 !important; color: white; cursor: pointer; opacity: 1; }

    #timer {
      text-align: center;
      font-size: 1.2rem;
      color: #933768;
      margin-top: 20px;
      font-weight: bold;
    }

    #resultBox {
      margin-right: 20px;
      font-weight: bold;
      color: #2e7d32;
      font-size: 1.3rem;
    }
  </style>
</head>

<body>

<div class="course-title">التحرير العربي (103 عرب) للعام الجامعي 1447هـ</div>

<div class="main-container">
  <div class="top-section">
    <div class="text-side">
      <h3>الهمزة في بداية الكلمة</h3>
      <p>تنقسم إلى: <strong>همزة قطع</strong> و <strong>همزة وصل</strong>.</p>
      <p><strong>همزة الوصل (ا):</strong> تنطق في بداية الكلام ولا تنطق عند وصله، وتكتب ألفاً مجردة.</p>
      <p><strong>همزة القطع (أ / إ):</strong> تنطق وتكتب دائماً، فوق الألف إذا كانت مفتوحة أو مضمومة، وتحتها إذا كانت مكسورة.</p>
      <p><strong>مواضع همزة الوصل:</strong>
        <ul>
          <li>ال التعريف.</li>
          <li>الأسماء السبعة (اسم، ابن، ابنة، امرؤ، امرأة، اثنان، اثنتان).</li>
          <li>أمر الفعل الثلاثي (اكتب، اقرأ).</li>
          <li>ماضي وأمر ومصدر الخماسي والسداسي.</li>
        </ul>
      </p>
    </div>

    <div class="video-side">
      <div class="speaker-box">
        المتحدث: <strong>أ.د. إبراهيم اللاحم</strong>
      </div>
<iframe 
  class="video-frame" 
  src="https://drive.google.com/file/d/1D8EWyT6Rjj9svlC3IbBFPbHjgnN5T5bD/preview" 
  allow="autoplay; fullscreen; picture-in-picture" 
  allowfullscreen 
  loading="lazy"
  title="شرح قاعدة الهمزة في بداية الكلمة">
</iframe>    </div>
  </div>

  <hr style="border: 0; border-top: 1px solid #eee;">

  <h3 style="color:#933768; text-align: center;">تدريب تطبيقي (اختر الإجابة الصحيحة)</h3>
  <div class="exercise-grid" id="exerciseGrid"></div>

  <div id="timer">الوقت المتبقي: 20:00</div>

  <div style="text-align:center; margin-top:20px;">
    <button id="checkBtn" class="state0" disabled>تصحيح الإجابات</button>
    <div id="resultBox"></div>
  </div>
</div>

<script>
  const questionBank = [
    {q:"اختر الكتابة الصحيحة:", a:["إسم","اسم","أسم","آسم"], correct:"اسم"},
    {q:"كلمة تبدأ بهمزة وصل:", a:["اكتب","أحمد","امرأة","أكل"], correct:"اكتب"},
    {q:"ضع الهمزة الصحيحة في كلمة ( ___لى )", a:["إلى","الى","ألى","آلى"], correct:"إلى"},
    {q:"أمر الفعل الثلاثي (كتب) هو:", a:["إكتب","اكتب","أكتب","أكْتب"], correct:"اكتب"},
    {q:"كلمة (ابن) نوع الهمزة فيها:", a:["همزة قطع","همزة وصل","همزة متطرفة","مد"], correct:"همزة وصل"},
    {q:"اختر الكلمة الصحيحة إملائياً:", a:["إمرأة","امرأة","أمرأة","آمرأة"], correct:"امرأة"},
    {q:"أمر الفعل (دخل):", a:["إدخل","ادخل","أدخل","آدخل"], correct:"ادخل"},
    {q:"أي الكلمات التالية همزتها قطع؟", a:["اسم","ابن","أحمد","امرؤ"], correct:"أحمد"},
    {q:"المصدر من الفعل (انطلق):", a:["إنطلاق","انطلاق","أنطلاق","آنطلاق"], correct:"انطلاق"},
    {q:"المثنى من (ابن) هو:", a:["إبنان","ابنان","أبنان","آبنان"], correct:"ابنان"}
  ];

  function shuffle(array) { return array.sort(() => Math.random() - 0.5); }

  const selected = shuffle(questionBank).slice(0, 6);
  const grid = document.getElementById("exerciseGrid");
  const checkBtn = document.getElementById("checkBtn");
  let timerStarted = false;
  let timeLeft = 20 * 60;

  selected.forEach((item, index) => {
    const box = document.createElement("div");
    box.className = "exercise-box";
    let options = item.a.map(opt => `
      <label>
        <input type="radio" name="q${index}" value="${opt}" onchange="checkProgress()"> ${opt}
      </label>
    `).join("");
    
    box.innerHTML = `<h4>سؤال ${index+1}</h4><p>${item.q}</p>${options}`;
    grid.appendChild(box);
  });

  function startTimer() {
    const timerDisplay = document.getElementById("timer");
    const interval = setInterval(() => {
      timeLeft--;
      let m = Math.floor(timeLeft / 60);
      let s = timeLeft % 60;
      timerDisplay.innerText = `الوقت المتبقي: ${m}:${s < 10 ? '0' + s : s}`;
      if (timeLeft <= 0) {
        clearInterval(interval);
        alert("انتهى الوقت!");
        checkBtn.disabled = true;
      }
    }, 1000);
  }

  window.checkProgress = function() {
    if (!timerStarted) {
      timerStarted = true;
      startTimer();
    }
    
    const answeredCount = document.querySelectorAll('input[type="radio"]:checked').length;
    if (answeredCount > 0 && answeredCount < 6) {
      checkBtn.className = "state1";
    } else if (answeredCount === 6) {
      checkBtn.className = "state2";
      checkBtn.disabled = false;
    }
  };

  checkBtn.addEventListener("click", () => {
    let score = 0;
    selected.forEach((item, index) => {
      const selectedOpt = document.querySelector(`input[name="q${index}"]:checked`);
      if (selectedOpt && selectedOpt.value === item.correct) {
        score += 1.5;
      }
    });
    document.getElementById("resultBox").innerHTML = `درجتك هي: ${score} من 9`;
    checkBtn.disabled = true;
    checkBtn.style.opacity = "0.5";
  });
</script>

</body>
</html>
